  
containers:
{%for c in PODSPEC_Containers%}
  - name: {{c.CONTAINER_name}}

    image: {{c.CONTAINER_image}}

    {%if c.CONTAINER_args%}args: ["{%for arg in c.CONTAINER_args%}{{arg.CONTAINER_ARGS_value}};{%endfor%}"] {%endif%}

    {%if c.CONTAINER_command%}command: [{%for comm in c.CONTAINER_command%}"{{comm.CONTAINER_COMMAND_value}}",{%endfor%}] {%endif%}

    {%if c.CONTAINER_env%}env: 
      {%for env in c.CONTAINER_env%}
      - name: {{env.CONTAINER_ENV_name}}
        {%if env.CONTAINER_ENV_value%}value: "{{env.CONTAINER_ENV_value}}"{%endif%}

        {%if env.CONTAINER_ENV_valueFrom%}valueFrom: {%endif%}
          {%if env.configMapKeyRef%}configMapKeyRef: 
            name: {{env.CONFIGMAPKEYREF_name}}
            key: {{env.CONFIGMAPKEYREF_key}}
            {%if env.CONFIGMAPKEYREF_optional%}optional: {{env.CONFIGMAPKEYREF_optional}}{%endif%}
          {%endif%}
          {%if env.fieldRef%}fieldRef: 
            fieldPath: {{env.FIELDREF_fieldPath}}
            {# {%if env.FIELDREF_apiversion%}apiversion: {{env.FIELDREF_apiversion}}{%endif%} #}
          {%endif%}
          {%if env.resourceFieldRef%}resourceFieldRef: 
            containerName: {{env.RESOURCEFIELDREF_containerName}}
            resource: {{env.RESOURCEFIELDREF_resource}}
            {%if env.RESOURCEFIELDREF_divisor%}divisor: {{env.RESOURCEFIELDREF_divisor}}{%endif%}
          {%endif%}
          {%if env.secretKeyRef%}secretKeyRef: 
            name: {{env.SECRETKEYREF_key}}
            key: {{env.SECRETKEYREF_name}}
            {%if env.SECRETKEYREF_optional%}optional: {{env.SECRETKEYREF_optional}}{%endif%}
          {%endif%}
      {%endfor%}
    {%endif%}

    {%if c.CONTAINER_envFrom%}envFrom:
      {%for envF in c.CONTAINER_envFrom%}
      {%if envF.ENVFROM_configMapRef%}- configMapRef:
          name: {{envF.CONFIGMAPREF_name}}
      {%endif%}
      {%if envF.ENVFROM_secretRef%}- secretRef:
          name: {{envF.SECRETREF_name}}  
      {%endif%} 
      {%endfor%}
    {%endif%}

    {%if c.CONTAINER_imagePullPolicy%}imagePullPolicy: {{c.IMAGEPULLPOLICY_always}}{{c.IMAGEPULLPOLICY_never}}{{c.IMAGEPULLPOLICY_ifNotPresent}} {%endif%}
  
    {%if c.CONTAINER_lifecycle%}lifecycle: 

      {%if c.LIFECYCLE_postStart%}postStart:
        {%if c.POSTSTART_exec%}exec:
          command: [{%for e in c.POSTSTART_exec%}"{{e.POSTSTART_EXEC_command}}",{%endfor%}]
        {%endif%}

        {%if c.POSTSTART_sleep%}sleep: {{c.POSTSTART_SLEEP_seconds}} {%endif%}
      
        {%if c.POSTSTART_httpGet%}httpGet:
          host: {{c.POSTSTART_HTTPGET_host}}
          {%if c.POSTSTART_HTTPGET_httpHeaders%}httpHeaders:
            {%for header in c.POSTSTART_HTTPGET_httpHeaders%}
            - name: {{header.POSTSTART_HTTPHEADERS_name}}
              value: {{header.POSTSTART_HTTPHEADERS_value}}
            {%endfor%}
          {%endif%}
          port: {{c.POSTSTART_HTTPGET_port}}
          {%if c.POSTSTART_HTTPGET_path%}path: {{c.POSTSTART_HTTPGET_path}}{%endif%}
          {%if c.POSTSTART_HTTPGET_scheme%}scheme: {{c.POSTSTART_HTTPGET_scheme}}{%endif%}
        {%endif%}
      {%endif%}

      {%if c.LIFECYCLE_preStop%}preStop:
        {%if c.PRESTOP_exec%}exec:
          command: [{%for e in c.PRESTOP_exec%}"{{e.PRESTOP_EXEC_command}}",{%endfor%}]
        {%endif%}

        {%if c.PRESTOP_sleep%}sleep: {{c.PRESTOP_SLEEP_seconds}} {%endif%}
      
        {%if c.PRESTOP_httpGet%}httpGet:
          host: {{c.PRESTOP_HTTPGET_host}}
          {%if c.PRESTOP_HTTPGET_httpHeaders%}httpHeaders:
            {%for header in c.PRESTOP_HTTPGET_httpHeaders%}
            - name: {{header.PRESTOP_HTTPHEADERS_name}}
              value: {{header.PRESTOP_HTTPHEADERS_value}}
            {%endfor%}
          {%endif%}
          port: {{c.PRESTOP_HTTPGET_port}}
          {%if c.PRESTOP_HTTPGET_path%}path: {{c.PRESTOP_HTTPGET_path}}{%endif%}
          {%if c.PRESTOP_HTTPGET_scheme%}scheme: {{c.PRESTOP_HTTPGET_scheme}}{%endif%}
        {%endif%}
      {%endif%}

    {%if c.CONTAINER_livenessProbe%}livenessProbe:
      {%if c.LIVENESSPROBE_exec%}exec:
        command: [{%for exec in c.LIVENESSPROBE_exec%}"{{exec.LIVENESSPROBE_EXEC_command}}",{%endfor%}]
      {%endif%}
      {%if c.LIVENESSPROBE_failureThreshold%}failureThreshold: {{c.LIVENESSPROBE_failureThreshold}} {%endif%}
      {%if c.LIVENESSPROBE_grpc%}grpc: 
        port: {{c.LIVENESSPROBE_GRPC_port}} 
        {%if c.LIVENESSPROBE_GRPC_service%}service: {{c.LIVENESSPROBE_GRPC_service}}{%endif%}
      {%endif%}

      {%if c.LIVENESSPROBE_httpGet%}httpGet:
        host: {{c.LIVENESSPROBE_HTTPGET_host}}
        {%if c.LIVENESSPROBE_HTTPGET_httpHeaders%}httpHeaders:
          {%for header in c.LIVENESSPROBE_HTTPGET_httpHeaders%}
          - name: {{header.LIVENESSPROBE_HTTPHEADERS_name}}
            value: {{header.LIVENESSPROBE_HTTPHEADERS_value}}
          {%endfor%}
        {%endif%}
        port: {{c.LIVENESSPROBE_HTTPGET_port}}
        {%if c.LIVENESSPROBE_HTTPGET_path%}path: {{c.LIVENESSPROBE_HTTPGET_path}}{%endif%}
        {%if c.LIVENESSPROBE_HTTPGET_scheme%}scheme: {{c.LIVENESSPROBE_HTTPGET_scheme}}{%endif%}
      {%endif%}

      {%if c.LIVENESSPROBE_initialDelaySeconds%}initialDelaySeconds: {{c.LIVENESSPROBE_initialDelaySeconds}}{%endif%}
      {%if c.LIVENESSPROBE_periodSeconds%}periodSeconds: {{c.LIVENESSPROBE_periodSeconds}}{%endif%}
      {%if c.LIVENESSPROBE_successThreshold%}successThreshold: {{c.LIVENESSPROBE_successThreshold}}{%endif%}
      {%if c.LIVENESSPROBE_timeoutSeconds%}timeoutSeconds: {{c.LIVENESSPROBE_timeoutSeconds}}{%endif%}

      {%if c.LIVENESSPROBE_tcpSocket%}tcpSocket:
        port: {{c.LIVENESSPROBE_TCPSOCKET_port}}
        {%if c.LIVENESSPROBE_TCPSOCKET_host%}host: "{{c.LIVENESSPROBE_TCPSOCKET_host}}"{%endif%}
      {%endif%}
      {%if c.LIVENESSPROBE_terminationGracePeriodSeconds%}terminationGracePeriodSeconds: {{c.LIVENESSPROBE_terminationGracePeriodSeconds}}{%endif%}
    {%endif%}

    {%if c.CONTAINER_ports%}ports: 
    {%for p in c.CONTAINER_ports%} 
      - containerPort: {{p.CONTAINER_PORTS_containerPort}}
        {%if p.CONTAINER_PORTS_name%}name: {{p.CONTAINER_PORTS_name}}{%endif%}
        {%if p.CONTAINER_PORTS_hostIP%}hostIP: {{p.CONTAINER_PORTS_hostIP}}{%endif%}
        {%if p.CONTAINER_PORTS_hostPort%}hostPort: {{p.CONTAINER_PORTS_hostPort}}{%endif%}
        {%if p.CONTAINER_PORTS_protocol%}protocol: {{p.PROTOCOL_UDP}}{{PROTOCOL_TCP}}{{PROTOCOL_SCTP}}{%endif%}
    {%endfor%}
    {%endif%}

    {%if c.CONTAINER_readinessProbe%}readinessProbe:
      {%if c.READINESSPROBE_exec%}exec:
        command: [{%for exec in c.READINESSPROBE_exec%}"{{exec.READINESSPROBE_EXEC_command}}",{%endfor%}]
      {%endif%}
      {%if c.READINESSPROBE_failureThreshold%}failureThreshold: {{c.READINESSPROBE_failureThreshold}} {%endif%}
      {%if c.READINESSPROBE_grpc%}grpc: 
        port: {{c.READINESSPROBE_GRPC_port}} 
        {%if c.READINESSPROBE_GRPC_service%}service: {{c.READINESSPROBE_GRPC_service}}{%endif%}
      {%endif%}

      {%if c.READINESSPROBE_httpGet%}httpGet:
        host: {{c.READINESSPROBE_HTTPGET_host}}
        {%if c.READINESSPROBE_HTTPGET_httpHeaders%}httpHeaders:
          {%for header in c.READINESSPROBE_HTTPGET_httpHeaders%}
          - name: {{header.READINESSPROBE_HTTPHEADERS_name}}
            value: {{header.READINESSPROBE_HTTPHEADERS_value}}
          {%endfor%}
        {%endif%}
        port: {{c.READINESSPROBE_HTTPGET_port}}
        {%if c.READINESSPROBE_HTTPGET_path%}path: {{c.READINESSPROBE_HTTPGET_path}}{%endif%}
        {%if c.READINESSPROBE_HTTPGET_scheme%}scheme: {{c.READINESSPROBE_HTTPGET_scheme}}{%endif%}
      {%endif%}

      {%if c.READINESSPROBE_initialDelaySeconds%}initialDelaySeconds: {{c.READINESSPROBE_initialDelaySeconds}}{%endif%}
      {%if c.READINESSPROBE_periodSeconds%}periodSeconds: {{c.READINESSPROBE_periodSeconds}}{%endif%}
      {%if c.READINESSPROBE_successThreshold%}successThreshold: {{c.READINESSPROBE_successThreshold}}{%endif%}
      {%if c.READINESSPROBE_timeoutSeconds%}timeoutSeconds: {{c.READINESSPROBE_timeoutSeconds}}{%endif%}

      {%if c.READINESSPROBE_tcpSocket%}tcpSocket:
        port: {{c.READINESSPROBE_TCPSOCKET_port}}
        {%if c.READINESSPROBE_TCPSOCKET_host%}host: "{{c.READINESSPROBE_TCPSOCKET_host}}"{%endif%}
      {%endif%}
      {%if c.READINESSPROBE_terminationGracePeriodSeconds%}terminationGracePeriodSeconds: {{c.READINESSPROBE_terminationGracePeriodSeconds}}{%endif%}
    {%endif%}

    {%if c.CONTAINER_resizePolicy%}resizePolicy:
    {%for res in c.CONTAINER_resizePolicy%}
      - resourceName: {{res.CONTAINER_RESIZEPOLICY_RESTARTPOLICY_cpu}}{{res.CONTAINER_RESIZEPOLICY_RESTARTPOLICY_memory}}
        restartPolicy: {{res.RESIZEPOLICY_restartPolicy}}
    {%endfor%}
    {%endif%}

    {%if c.CONTAINER_restartPolicy%}restartPolicy: {{c.CONTAINER_restartPolicy}}{%endif%}

    {%if c.CONTAINER_resources%}resources:
      {%if c. RESOURCES_request%}request:
        cpu: {{c.REQUEST_cpu}}
        memory: {{c.REQUEST_memory}}
      {%endif%}
      {%if c. RESOURCES_limits%}limits:
        cpu: {{c.LIMITS_cpu}}
        memory: {{c.LIMITS_memory}}
      {%endif%}
      {%if c.RESOURCES_claims%}claims:
        {#Este campo est√° en beta en la version de kubernetes 1.30#}
        - name: {{c.RESOURCES_CLAIMS_name}}
      {%endif%}
    {%endif%}


    {%if c.CONTAINER_securityContext %}securityContext:
      {%if c.SECURITYCONTEXT_allowPrivilegeEscalation%}allowPrivilegeEscalation: {{c.SECURITYCONTEXT_allowPrivilegeEscalation}}{%endif%}
      {%if c.SECURITYCONTEXT_privileged%}privileged: {{c.SECURITYCONTEXT_privileged}}{%endif%}
      {%if c.SECURITYCONTEXT_procMount%}procMount: {{c.SECURITYCONTEXT_procMount}}{%endif%}
      {%if c.SECURITYCONTEXT_readOnlyRootFilesystem%}readOnlyRootFilesystem: {{c.SECURITYCONTEXT_readOnlyRootFilesystem}}{%endif%}
      {%if c.SECURITYCONTEXT_runAsGroup%}runAsGroup: {{c.SECURITYCONTEXT_runAsGroup}}{%endif%}
      {%if c.SECURITYCONTEXT_runAsNonRoot%}runAsNonRoot: {{c.SECURITYCONTEXT_runAsNonRoot}}{%endif%}
      {%if c.SECURITYCONTEXT_runAsUser%}runAsUser: {{c.SECURITYCONTEXT_runAsUser}}{%endif%}

      {%if c.SECURITYCONTEXT_capabilities%}capabilities:
        {%if c.CAPABILITIES_add%}add:
          {%for add in c.CAPABILITIES_add%}- {{add.addedCapabilities}}{%endfor%}
        {%endif%}
        {%if c.CAPABILITIES_drop%}drop:
          {%for drop in c.CAPABILITIES_drop%}- {{drop.removedCapabilities}}{%endfor%}
        {%endif%}
      {%endif%}

      {%if c.SECURITYCONTEXT_seLinuxOptions%}seLinuxOptions: 
        {%if c.SELINUXOPTIONS_user%}user: "{{c.SELINUXOPTIONS_user}}"{%endif%}
        {%if c.SELINUXOPTIONS_role%}role: "{{c.SELINUXOPTIONS_role}}" {%endif%}
        {%if c.SELINUXOPTIONS_type%}type: "{{c.SELINUXOPTIONS_type}}"{%endif%}
        {%if c.SELINUXOPTIONS_level%}level: "{{c.SELINUXOPTIONS_level}}" {%endif%}
      {%endif%}

      {%if c.SECURITYCONTEXT_seccompProfile%}seccompProfile:
        {%if c.SECCOMPROFILE_localhostProfile%}localhostProfile: {{c.SECCOMPROFILE_localhostProfile}} {%endif%}
        {%if c.SECCOMPROFILE_type%}type: {{c.SECCOMPROFILE_Type_LocalHost}}{{c.SECCOMPROFILE_Type_RuntimeDefault}}{{c.SECCOMPROFILE_Type_Unconfined}} {%endif%}
      {%endif%}

      {%if c.SECURITYCONTEXT_windowsOptions%}windowsOptions:
        {%if c.WINDOWSOPTIONS_gmsaCredentialSpec%}gmsaCredentialSpec: {{c.WINDOWSOPTIONS_gmsaCredentialSpec}} {%endif%}
        {%if c.WINDOWSOPTIONS_gmsaCredentialSpecName%}gmsaCredentialSpecName: "{{c.WINDOWSOPTIONS_gmsaCredentialSpecName}}" {%endif%}
        {%if c.WINDOWSOPTIONS_hostProcess%}hostProcess: true {%endif%}
        {%if c.WINDOWSOPTIONS_runAsUserName%}runAsUserName: "{{c.WINDOWSOPTIONS_runAsUserName}}" {%endif%}
      {%endif%}

    {%endif%}

    {%if c.CONTAINER_startupProbe%}startUpProbe:
      {%if c.STARTUPPROBE_exec%}exec:
        command: [{%for exec in c.STARTUPPROBE_exec%}"{{exec.STARTUPPROBE_EXEC_command}}",{%endfor%}]
      {%endif%}
      {%if c.STARTUPPROBE_failureThreshold%}failureThreshold: {{c.STARTUPPROBE_failureThreshold}} {%endif%}
      {%if c.STARTUPPROBE_grpc%}grpc: 
        port: {{c.STARTUPPROBE_GRPC_port}} 
        {%if c.STARTUPPROBE_GRPC_service%}service: {{c.STARTUPPROBE_GRPC_service}}{%endif%}
      {%endif%}

      {%if c.STARTUPPROBE_httpGet%}httpGet:
        host: {{c.STARTUPPROBE_HTTPGET_host}}
        {%if c.STARTUPPROBE_HTTPGET_httpHeaders%}httpHeaders:
          {%for header in c.STARTUPPROBE_HTTPGET_httpHeaders%}
          - name: {{header.STARTUPPROBE_HTTPHEADERS_name}}
            value: {{header.STARTUPPROBE_HTTPHEADERS_value}}
          {%endfor%}
        {%endif%}
        port: {{c.STARTUPPROBE_HTTPGET_port}}
        {%if c.STARTUPPROBE_HTTPGET_path%}path: {{c.STARTUPPROBE_HTTPGET_path}}{%endif%}
        {%if c.STARTUPPROBE_HTTPGET_scheme%}scheme: {{c.STARTUPPROBE_HTTPGET_scheme}}{%endif%}
      {%endif%}

      {%if c.STARTUPPROBE_initialDelaySeconds%}initialDelaySeconds: {{c.STARTUPPROBE_initialDelaySeconds}}{%endif%}
      {%if c.STARTUPPROBE_periodSeconds%}periodSeconds: {{c.STARTUPPROBE_periodSeconds}}{%endif%}
      {%if c.STARTUPPROBE_successThreshold%}successThreshold: {{c.STARTUPPROBE_successThreshold}}{%endif%}
      {%if c.STARTUPPROBE_timeoutSeconds%}timeoutSeconds: {{c.STARTUPPROBE_timeoutSeconds}}{%endif%}

      {%if c.STARTUPPROBE_tcpSocket%}tcpSocket:
        port: {{c.STARTUPPROBE_TCPSOCKET_port}}
        {%if c.STARTUPPROBE_TCPSOCKET_host%}host: "{{c.STARTUPPROBE_TCPSOCKET_host}}"{%endif%}
      {%endif%}
      {%if c.STARTUPPROBE_terminationGracePeriodSeconds%}terminationGracePeriodSeconds: {{c.STARTUPPROBE_terminationGracePeriodSeconds}}{%endif%}
    {%endif%}
    
    {%if c.CONTAINER_stdin%}stdin: {{c.CONTAINER_stdin}}{%endif%}

    {%if c.CONTAINER_stdinOnce%}stdinOnce: {{c.CONTAINER_stdinOnce}}{%endif%}

    {%if c.CONTAINER_terminationMessagePath%}terminationMessagePath: "{{c.CONTAINER_terminationMessagePath}}"{%endif%}

    {%if c.CONTAINER_terminationMessagePolicy%}terminationMessagePolicy: "{{c.CONTAINER_terminationMessagePolicy}}"{%endif%}

    {%if c.CONTAINER_tty%}tty: {{c.CONTAINER_tty}} {%endif%}

    {%if c.CONTAINER_volumeDevices%}VolumeDevices:
      {%for dev in c.CONTAINER_volumeDevices%}
      - name: {{dev.VOLUMEDEVICES_name}}
        devicePath: {{dev.VOLUMEDEVICES_devicePath}}
      {%endfor%}
    {%endif%}

    {%if c.CONTAINER_volumeMounts%}volumeMounts:
      {%for dev in c.CONTAINER_volumeMounts%}
      - name: {{dev.VOLUMEMOUNTS_name}}
        mountPath: {{dev.VOLUMEMOUNTS_mountPath}}
        {%if dev.VOLUMEMOUNTS_readonly%}readonly: {{dev.VOLUMEMOUNTS_readonly}}{%endif%}
      {%endfor%}
    {%endif%}

    {%if c.CONTAINER_workingDir%}workingDir: {{c.CONTAINER_workingDir}}{%endif%}

    {%endif%}

{%endfor%}

{%if PODSPEC_activeDeadlineSeconds%}activeDeadlineSeconds: {{PODSPEC_activeDeadlineSeconds}}{%endif%}

{%if PODSPEC_affinity%}affinity:
  {%if AFFINITY_nodeAffinity%}nodeAffinity: {%endif%}
  {%if AFFINITY_podAffinity%}podAffinity: {%endif%}
  {%if AFFINITY_podAntiAffinity%}podAntiAffinity: {%endif%}
{%endif%}

{%if PODSPEC_automountServiceAccountToken%}automountServiceAccountToken: true{%endif%}

{%if PODSPEC_dnsPolicy%}dnsPolicy: {{DNSPOLICY_ClusterFirstWithHostNet}}{{DNSPOLICY_ClusterFirst}}{{DNSPOLICY_Default}}{{DNSPOLICY_None}}{%endif%}

{%if not PODSPEC_enableServiceLinks%}enableServiceLinks: false{%endif%} 

{%if PODSPEC_hostIPC%}hostIPC: true{%endif%}

{%if PODSPEC_hostNetwork%}hostNetwork: true{%endif%}

{%if PODSPEC_hostPID%}hostPID: true{%endif%}

{%if not PODSPEC_hostUsers%}hostUsers: false{%endif%}

{%if PODSPEC_hostname%}hostname: {{PODSPEC_hostname}}{%endif%}

{%if PODSPEC_nodeName%}nodeName: {{PODSPEC_nodeName}}{%endif%}

{%if PODSPEC_Volumes%}volumes: 
{%for v in PODSPEC_Volumes%}
  - name: {{v.VOLUMES_name}}
    {%if v.emptyDir%}emptyDir:
      {%if v.EMPTYDIR_medium%}medium: {{v.EMPTYDIR_MEDIUM_memory}}{%if v.EMPTYDIR_MEDIUM_default%}""{%endif%}{%endif%}
      {%if v.EMPTYDIR_sizeLimit%}sizeLimit: {{v.EMPTYDIR_sizeLimit}}{%endif%}
    {%endif%}

    {%if v.hostPath%}hostPath:
      {%if v.HOSTPATH_path%}path: "{{v.HOSTPATH_path}}"{%endif%}
      {%if v.HOSTPATH_type%}type: {{v.HOSTPATH_type}}{%endif%}
    {%endif%}
{%endfor%}
{%endif%}

